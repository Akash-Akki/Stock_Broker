<!DOCTYPE html>
<html>
<head>
    <title>FULLSTACKROVERS Stock Information</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- Font Icon -->
    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">

    <!-- Main css -->
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style>
			header {
			   top: 5px;
			   position:absolute;
			   padding:10px;
			   font: bold 16px italic Arial;
			}

			footer {
			   position:absolute;
			   bottom:0;
			   width:100%;
			   height:10%;
			   font: bold 16px italic Arial;
			}
			.sidenav {
		  display: inline;
		  overflow: hidden;
		  background-color: none;
		  top: 0px;
		  width: 100%;
		  right: 150px;
		  margin-bottom: 2.5em;
		}
		.sidenav  a {
		  float: right;
		  display: block;
		  color: #000;
		  text-align: center;
		  padding: 14px 16px;
		  text-decoration: none;
		  font-size: 17px;
		}

		.sidenav a.active {
		  background-color: #4CAF50;
		  color: white;
		}

		.sidenav a:hover:not(.active) {
		  background-color: black;
		  color: white;
		}

        td {border: 1px #DDD solid; padding: 5px; cursor: pointer;}

        .selected {
            background-color: brown;
            color: #FFF;
        }

	</style>
    <script src= "https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"> </script>
    <script>
            function checkValue()
            {
                    var table = document.getElementById("stktab");
                    var cells = table.getElementsByTagName('td');

                    for (var i = 0; i < cells.length; i++) {
                        // Take each cell
                        var cell = cells[i];
                        // do something on onclick event for cell
                        cell.onclick = function () {
                            // Get the row id where the cell exists
                            var rowId = this.parentNode.rowIndex;

                            var rowsNotSelected = table.getElementsByTagName('tr');
                            for (var row = 0; row < rowsNotSelected.length; row++) {
                                rowsNotSelected[row].style.backgroundColor = "";
                                rowsNotSelected[row].classList.remove('selected');
                            }
                            var rowSelected = table.getElementsByTagName('tr')[rowId];
                            rowSelected.style.backgroundColor = "yellow";
                            rowSelected.className += " selected";

                            msg = 'The ID of the company is: ' + rowSelected.cells[0].innerHTML;
                            msg += '\nThe cell value is: ' + this.innerHTML;
                            alert(msg);
                        }
                    }


                var e = document.getElementById("month");
                var  monthselected = e.options[e.selectedIndex].value;
                console.log(monthselected);

            }

          //var list;
                        var list = [];
                function constructTable(selector) {
                      var xhttp = new XMLHttpRequest();
                    xhttp.onreadystatechange = function() {
                 if (this.readyState == 4 && this.status == 202) {
                  // Getting the all column names
                  list = JSON.parse(this.responseText);
                    var cols = Headers(list, selector);

                    // Traversing the JSON data
                    for (var i = 0; i < list.length; i++) {
                        var row = $('<tr/>');
                        for (var colIndex = 0; colIndex < cols.length ; colIndex++)
                        {
                            var val = list[i][cols[colIndex]];

                            // If there is any key, which is matching
                            // with the column name
                            if (val == null) val = "";
                                row.append($('<td/>').html(val));
                        }

                        //row.append($('<td/>').html('<button onclick="quantitychk(this);"> Buy </button>'));

                        // Adding each row to the table
                        $(selector).append(row);
                    }
                       console.log("response text is "+ this.responseText);

                   //JSON.stringify("list is "+list);
                   console.log("list length "+list.length);
                  console.log("obj is "+list[0].symbol);
                 }
            };
            xhttp.open("GET", "https://localhost:9090/listStocks", true);
            //xhttp.setRequestHeader("Content-type", "application/json");
            xhttp.send();

                }

                function quantitychk(o)
               {
                    var p=o.parentNode.parentNode;
                     p.parentNode.removeChild(p);
               }
                function Headers(list, selector) {
                    var columns = [];
                    var header = $('<tr/>');

                    for (var i = 0; i < list.length; i++) {
                        var row = list[i];

                        for (var k in row) {
                            if ($.inArray(k, columns) == -1) {
                                columns.push(k);

                                // Creating the header
                                header.append($('<th/>').html(k));
                            }

                        }
                    }

                    // Appending the header to the table
                    $(selector).append(header);
                        return columns;
                }
    </script>
</head>

<body onload="constructTable('#table');">
<header>
    <img src="images/mycomp1.jpg" alt="Logo" style="height:40px"></img>
</header>
</header>
<div id="firstsec">
    <nav class="sidenav">
        <a href="login.html" >Sign in</a>
        <a href="about.html" >About</a>
        <a href="stockPage.html" >StockPage</a>
        <a href="my_profile.html" >My Profile</a>
        <a href="firstpage.html" >Home</a>
    </nav>
</div>
<br><br><br><br><br><br>
<<select id="month">
    <option value="Jan" selected="selected"> January </option>
    <option value="February"> February </option>
    <option value="March"> March </option>
    <option value="April"> April </option>
    <option value="May"> May </option>
    <option value="June"> June </option>
    <option value="July"> July</option>
    <option value="August"> August </option>
    <option value="September"> September </option>
    <option value="October"> October </option>
    <option value="November"> November </option>
    <option value="December"> December </option>
</select>
<button id="checkVal" value="OK" onclick="checkValue()">Submit
    </button>
<table align = "center"
       id="stktab" border="1">
</table>

<br><br>
</body>
</html>